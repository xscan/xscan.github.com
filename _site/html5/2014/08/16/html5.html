<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/ie.html"><![endif]-->

    <title>html5 事件监听</title>
    <meta name="description" content="">

    <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  </head>
  <body>
    <aside id="sidebar">
      <nav id="tags">
        <a href="/index.html" id="avatar"></a>

        <ul id="tags__ul">
          <li id="js-label1" class="tags__li tags-btn active">All Posts</li>
          <li id="js-label2" class="tags__li tags-btn">Home</li>
          <li id="js-label3" class="tags__li tags-btn">Html5<li>
          <li id="js-label4" class="tags__li tags-btn">feeling</li>
          <li id="js-label5" class="tags__li tags-btn">--</li>
          <li id="js-label6" class="tags__li tags-btn">---</li>
        </ul>

        <div id="tags__bottom">
          <a href="mailto:xoscan@163.com" id="icon-email" class="tags-btn fontello"></a>
          <a href="/rss.xml" id="icon-feed" class="tags-btn fontello"></a>
        </div>
      </nav> <!-- end #tags -->

      <div id="posts-list">
        <form action="" id="search-form">
          <a href="/index.html" id="mobile-avatar"></a>
          <!-- NOTE: input field is disabled by default -->
          <input id="search-input" type="text" placeholder="Search..." disabled >
        </form>

        <nav id="pl__container">
        
          <a class="home pl__all" href="/home/2015/02/05/sublime-c.html"><span class="pl__circle"></span><span class="pl__title">sublime编译c</span><span class="pl__date">Feb 2015</span></a>
        
          <a class="html5 pl__all" href="/html5/2015/02/03/yeoman-bower-grunt.html"><span class="pl__circle"></span><span class="pl__title">搭建yeoman-bower+grunt前端流</span><span class="pl__date">Feb 2015</span></a>
        
          <a class="javascript5 pl__all" href="/javascript5/2015/02/01/jqueryext.html"><span class="pl__circle"></span><span class="pl__title">jQuery开发插件</span><span class="pl__date">Feb 2015</span></a>
        
          <a class=" pl__all" href="/2015/01/28/nodejs.html"><span class="pl__circle"></span><span class="pl__title">nodejs第一个例子</span><span class="pl__date">Jan 2015</span></a>
        
          <a class=" pl__all" href="/2015/01/27/thinkphpajaxpage.html"><span class="pl__circle"></span><span class="pl__title">thinkphpajax分页</span><span class="pl__date">Jan 2015</span></a>
        
          <a class=" pl__all" href="/2015/01/26/ubuntuphpExt.html"><span class="pl__circle"></span><span class="pl__title">ubuntu-php5.5.9安装mongodb数据库扩展</span><span class="pl__date">Jan 2015</span></a>
        
          <a class="feeling pl__all" href="/feeling/2015/01/20/feeling.html"><span class="pl__circle"></span><span class="pl__title">黄梁一梦</span><span class="pl__date">Jan 2015</span></a>
        
          <a class="home pl__all" href="/home/2015/01/15/addjs.html"><span class="pl__circle"></span><span class="pl__title">动态添加js</span><span class="pl__date">Jan 2015</span></a>
        
          <a class="home pl__all" href="/home/2015/01/14/jquerypost.html"><span class="pl__circle"></span><span class="pl__title">jquerypost提交方法</span><span class="pl__date">Jan 2015</span></a>
        
          <a class="home pl__all" href="/home/2014/10/23/linq.html"><span class="pl__circle"></span><span class="pl__title">Linq例子</span><span class="pl__date">Oct 2014</span></a>
        
          <a class="home pl__all" href="/home/2014/10/22/mongodb.html"><span class="pl__circle"></span><span class="pl__title">Nosql数据库之MongoDB</span><span class="pl__date">Oct 2014</span></a>
        
          <a class="home pl__all" href="/home/2014/10/05/yue.html"><span class="pl__circle"></span><span class="pl__title">9月经历</span><span class="pl__date">Oct 2014</span></a>
        
          <a class="home pl__all" href="/home/2014/10/05/delphi.html"><span class="pl__circle"></span><span class="pl__title">delphi作业</span><span class="pl__date">Oct 2014</span></a>
        
          <a class="html5 pl__all" href="/html5/2014/08/18/html5css3.html"><span class="pl__circle"></span><span class="pl__title">css3学习历程</span><span class="pl__date">Aug 2014</span></a>
        
          <a class=" pl__all" href="/2014/08/17/phpmysql.html"><span class="pl__circle"></span><span class="pl__title">php读取sql数据库中的值</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="html5 pl__all" href="/html5/2014/08/17/html5canvas.html"><span class="pl__circle"></span><span class="pl__title">HTML5 Canvas 画心</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="home pl__all" href="/home/2014/08/17/home.html"><span class="pl__circle"></span><span class="pl__title">搭建blog的路</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="html5 pl__all" href="/html5/2014/08/16/html5%20HE.html"><span class="pl__circle"></span><span class="pl__title">MARKDOWN</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="html5 pl__all" href="/html5/2014/08/16/html5.html"><span class="pl__circle"></span><span class="pl__title">html5 事件监听</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="html5 pl__all" href="/html5/2014/08/15/html5hy.html"><span class="pl__circle"></span><span class="pl__title">css3 火焰字</span><span class="pl__date">Aug 2014</span></a>
        
          <a class=" pl__all" href="/2014/08/15/1.html"><span class="pl__circle"></span><span class="pl__title">python socket tcp简单实例</span><span class="pl__date">Aug 2014</span></a>
        
          <a class="home pl__all" href="/home/2014/08/13/welcome-to-jekyll.html"><span class="pl__circle"></span><span class="pl__title">关于我</span><span class="pl__date">Aug 2014</span></a>
        
        </nav>
      </div> <!-- end #posts-list -->
    </aside> <!-- end #sidebar -->

    <div id="post">
      <div id="pjax">
        <article id="post__content">
  <h1 id="post__title" data-identifier="20140816">html5 事件监听</h1>
  <p>html5 事件监听</p>
<html>
	<head>
		<title>方框移动，事件监听</title>
		<meta charset="utf-8" />
		<script type="text/javascript">
			// <![CDATA[
			//window.add
			window.onload = function() {
				document.body.addEventListener("keydown", onkey, false);
				//建立一个键盘监听
				// Window.addEventListener("keydown",onkey,false);
				xs();
			}
			function xs()//画矩形
			{
				var c = document.getElementById("map");
				var cxt = c.getContext("2d");
				cxt.fillStyle = "#996633";
				x = c.width / 2;
				y = c.height / 2;
				cxt.fillRect(x, y, 100, 100);
				//cxt.translate(100, 100);
			
			}

			function qc() {//清空画布
				var c = document.getElementById("map");
				var cxt = c.getContext("2d");
				cxt.clearRect(0, 0, 500, 500);
			}

			function onkey(e) {
				if (e.keyCode == 37) {
					//alert("左");
					qc();
					x = x - 10;
					var c = document.getElementById("map");
					var cxt = c.getContext("2d");
					cxt.fillStyle = "#996633";
					cxt.fillRect(x, y, 100, 100);
				}
				if (e.keyCode == 38) {
					//alert("上");
					qc();
					y = y - 10;
					var c = document.getElementById("map");
					var cxt = c.getContext("2d");
					cxt.fillStyle = "#996633";
					cxt.fillRect(x, y, 100, 100);
				}
				if (e.keyCode == 39) {
					//alert("右");
					qc();
					x = x + 10;
					var c = document.getElementById("map");
					var cxt = c.getContext("2d");
					cxt.fillStyle = "#996633";
					cxt.fillRect(x, y, 100, 100);
				}
				if (e.keyCode == 40) {
					//alert("下");
					qc();
					y = y + 10;
					var c = document.getElementById("map");
					var cxt = c.getContext("2d");
					cxt.fillStyle = "#996633";
					cxt.fillRect(x, y, 100, 100);
				}
			}

		</script>
	</head>
	<body>
		<canvas id="map" width="500" height="300" style="border:1px solid #c3c3c3;"></canvas>
		<strong>按上下左右控制方框移动</strong>
	</body>
 	</html>

<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;html&gt;</span>
	<span class="nt">&lt;head&gt;</span>
		<span class="nt">&lt;title&gt;</span>方框移动，事件监听<span class="nt">&lt;/title&gt;</span>
		<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span> <span class="nt">/&gt;</span>
		<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
			<span class="c1">// &lt;![CDATA[</span>
			<span class="c1">//window.add</span>
			<span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
				<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;keydown&quot;</span><span class="p">,</span> <span class="nx">onkey</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
				<span class="c1">//建立一个键盘监听</span>
				<span class="c1">// Window.addEventListener(&quot;keydown&quot;,onkey,false);</span>
				<span class="nx">xs</span><span class="p">();</span>
			<span class="p">}</span>
			<span class="kd">function</span> <span class="nx">xs</span><span class="p">()</span><span class="c1">//画矩形</span>
			<span class="p">{</span>
				<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
				<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#996633&quot;</span><span class="p">;</span>
				<span class="nx">x</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
				<span class="nx">y</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
				<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
				<span class="c1">//cxt.translate(100, 100);</span>
			
			<span class="p">}</span>

			<span class="kd">function</span> <span class="nx">qc</span><span class="p">()</span> <span class="p">{</span><span class="c1">//清空画布</span>
				<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
				<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
				<span class="nx">cxt</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
			<span class="p">}</span>

			<span class="kd">function</span> <span class="nx">onkey</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">37</span><span class="p">)</span> <span class="p">{</span>
					<span class="c1">//alert(&quot;左&quot;);</span>
					<span class="nx">qc</span><span class="p">();</span>
					<span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="mi">10</span><span class="p">;</span>
					<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#996633&quot;</span><span class="p">;</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">38</span><span class="p">)</span> <span class="p">{</span>
					<span class="c1">//alert(&quot;上&quot;);</span>
					<span class="nx">qc</span><span class="p">();</span>
					<span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="mi">10</span><span class="p">;</span>
					<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#996633&quot;</span><span class="p">;</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">39</span><span class="p">)</span> <span class="p">{</span>
					<span class="c1">//alert(&quot;右&quot;);</span>
					<span class="nx">qc</span><span class="p">();</span>
					<span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
					<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#996633&quot;</span><span class="p">;</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">40</span><span class="p">)</span> <span class="p">{</span>
					<span class="c1">//alert(&quot;下&quot;);</span>
					<span class="nx">qc</span><span class="p">();</span>
					<span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
					<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
					<span class="kd">var</span> <span class="nx">cxt</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;2d&quot;</span><span class="p">);</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillStyle</span> <span class="o">=</span> <span class="s2">&quot;#996633&quot;</span><span class="p">;</span>
					<span class="nx">cxt</span><span class="p">.</span><span class="nx">fillRect</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
				<span class="p">}</span>
			<span class="p">}</span>

		<span class="nt">&lt;/script&gt;</span>
	<span class="nt">&lt;/head&gt;</span>
	<span class="nt">&lt;body&gt;</span>
		<span class="nt">&lt;canvas</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">width=</span><span class="s">&quot;500&quot;</span> <span class="na">height=</span><span class="s">&quot;300&quot;</span> <span class="na">style=</span><span class="s">&quot;border:1px solid #c3c3c3;&quot;</span><span class="nt">&gt;&lt;/canvas&gt;</span>
		<span class="nt">&lt;strong&gt;</span>按上下左右控制方框移动<span class="nt">&lt;/strong&gt;</span>
	<span class="nt">&lt;/body&gt;</span>
 	<span class="nt">&lt;/html&gt;</span></code></pre></div>


</article> <!-- end #post__content -->

<div id="post__share">
  <a id="icon-twitter" class="fontello" href="https://twitter.com/intent/tweet?url=place_your_url_here/html5/2014/08/16/html5.html&text=html5 事件监听" target="_blank"></a>
  <a id="icon-cc" class="fontello" href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank"></a>
  <a id="icon-weibo" class="fontello" href="http://v.t.sina.com.cn/share/share.php?url=place_your_url_here/html5/2014/08/16/html5.html&title=html5 事件监听" target="_blank"></a>
</div> <!-- end #post__share -->

<div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink" target="_blank">Loading Disqus comments...</a>
</div> <!-- end #disqus_thread -->

<p id="copyright">Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;&nbsp;|&nbsp;&nbsp;Theme <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll</a></p>
      </div> <!-- end #pjax -->

      <div id="post__toc-trigger">
        <div id="post__toc">
          <span id="post__toc-title">Table of Contents</span>
          <ul id="post__toc-ul"></ul>
        </div>
      </div>
    </div> <!-- end #post -->

    <button id="js-fullscreen"><span id="icon-arrow" class="fontello"></span></button>

    <script src="/assets/js/jquery-2.0.3.min.js"></script>
    <script src="/assets/js/jquery.pjax.js"></script>
    <script src="/assets/js/nprogress.js"></script>
    <script src="/assets/js/script.js"></script>
  </body>
</html>
